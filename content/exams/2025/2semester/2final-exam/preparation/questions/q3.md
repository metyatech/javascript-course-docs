# 問題3：マウスが乗ったら表示、離れたら非表示（mouseenter / mouseleave）

## Type

descriptive

## Prompt

要件を満たすような JavaScript を作成せよ。JavaScript のみ答えること。  
なお、JavaScript は HTML 全体が読み込まれた後の適切なタイミングで実行されるものとする。

**HTML:**

```html
<li class="menuWrap"> <!-- このメニューにマウスが乗ると -->
    <span>製品</span>
    <ul class="subMenu"> <!-- このサブメニューが表示される -->
        <li>パソコン</li>
        <li>スマホ</li>
        <li>タブレット</li>
    </ul>
</li>
```

**CSS:**

```css
.menuWrap {
    /* サブメニュー（.subMenu）を絶対配置するための基準にする */
    position: relative;
}

.subMenu {
    /* タイトルのすぐ下に配置 */
    position: absolute;
    top: 100%; /* 親要素の下端 */
    left: 0; /* 親要素の左端 */

    /* 余白削除 */
    margin: 0;

    /* 初期状態は非表示 */
    opacity: 0; /* 透明 */
    visibility: hidden; /* 見えない */

    /* 表示/非表示を滑らかにする */
    transition: all 0.3s;
}

/* show クラスが付いたら表示する */
.subMenu.show {
    opacity: 1; /* 表示 */
    visibility: visible; /* 見える */
}
```

要件：`.menuWrap` にマウスが乗ったらサブメニューが表示され、`.menuWrap` からマウスが離れたら非表示になる。この動作を、クラスの付け外しで適用するCSSを変更することで実現せよ。

**動作イメージ:**

![問題3の期待動作](../img/js2-final-preparation-q3.gif)

### Exam

セレクタや、表示状態にするクラス名が変わります。

## Scoring

- 3: メニュー要素を取得できている
- 3: サブメニュー要素を取得できている
- 5: マウスエンターイベントを設定する記述がある
- 5: マウスリーブイベントを設定する記述がある
- 4: クラスを追加する記述がある
- 4: クラスを削除する記述がある
- 2: 要件通り動作する

## Explanation

### 解答

**JavaScript:**

```js
let menuWrapYoso = document.querySelector('.menuWrap');
let subMenuYoso = document.querySelector('.subMenu');

menuWrapYoso.addEventListener('mouseenter', function() {
    subMenuYoso.classList.add('show');
});

menuWrapYoso.addEventListener('mouseleave', function() {
    subMenuYoso.classList.remove('show');
});
```

### 解説

この問題は、マウスイベントとクラスの付け外しで表示状態を切り替える問題です。

1. **イベントを付ける要素の範囲が重要**  
   サブメニューを含まない小さい要素（例：文字だけの部分）にイベントを付けると、サブメニューへマウスを移動した瞬間に「マウスが離れた」と判定され、すぐに消えることがあります。  
   そのため、タイトルとサブメニューを両方含む `.menuWrap` にイベントを付けます。  
2. **CSSで表示/非表示の状態を作る**  
   - `.subMenu` は `opacity: 0` と `visibility: hidden` で非表示  
   - `.subMenu.show` は `opacity: 1` と `visibility: visible` で表示  
   - `transition` により、透明度の変化が滑らかになります  
3. **イベントに応じてクラスを付け外しする**  
   - `mouseenter` で `show` クラスを追加して表示  
   - `mouseleave` で `show` クラスを削除して非表示  
